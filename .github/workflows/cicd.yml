name: CICD BUILD AND PUSH DOCKER IMAGE
on:
 push:
   branches:
     - dev
jobs:
  build:
   runs-on: ubuntu-latest
   steps:
     - name: checkout github
       uses: actions/checkout@v2 # this read the entire repository
     - name: login to docker hub
       uses: docker/login-action@v3
       with:
         username: ${{secrets.DOCKER_USERNAME}}
         password: ${{secrets.DOCKER_PASSWORD}}
     - name: build with docker
       run: docker build -t myapp .
     - name: tag image 
       run: docker tag betrand1997 myapp/latest 
     - name: push image to docker hub 
       run: docker push betrand1997 myapp/latest 